{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { httpGetLaunches, httpSubmitLaunch, httpAbortLaunch } from \"./requests\";\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n  _s();\n\n  const [launches, saveLaunches] = useState([]);\n  const [isPendingLaunch, setPendingLaunch] = useState(false);\n  const getLaunches = useCallback(async () => {\n    const fetchedLaunches = await httpGetLaunches();\n    saveLaunches(fetchedLaunches);\n  }, []);\n  useEffect(() => {\n    getLaunches();\n  }, [getLaunches]);\n  const submitLaunch = useCallback(async e => {\n    e.preventDefault();\n    setPendingLaunch(true);\n    const data = new FormData(e.target);\n    const launchDate = new Date(data.get(\"launch-day\"));\n    const mission = data.get(\"mission-name\");\n    const rocket = data.get(\"rocket-name\");\n    const target = data.get(\"planets-selector\");\n    const response = await httpSubmitLaunch({\n      launchDate,\n      mission,\n      rocket,\n      target\n    });\n    const success = response.ok;\n\n    if (success) {\n      getLaunches();\n      setTimeout(() => {\n        setPendingLaunch(false);\n        onSuccessSound();\n      }, 800);\n    } else {\n      onFailureSound();\n    }\n  }, [getLaunches, onSuccessSound, onFailureSound]);\n  const abortLaunch = useCallback(async id => {\n    const response = await httpAbortLaunch(id); // TODO: Set success based on response.\n\n    const success = response.ok;\n\n    if (success) {\n      getLaunches();\n      onAbortSound();\n    } else {\n      onFailureSound();\n    }\n  }, [getLaunches, onAbortSound, onFailureSound]);\n  return {\n    launches,\n    isPendingLaunch,\n    submitLaunch,\n    abortLaunch\n  };\n}\n\n_s(useLaunches, \"8KpHIIq7AzMRt3raNpddjI+KYXY=\");\n\nexport default useLaunches;","map":{"version":3,"names":["useCallback","useEffect","useState","httpGetLaunches","httpSubmitLaunch","httpAbortLaunch","useLaunches","onSuccessSound","onAbortSound","onFailureSound","launches","saveLaunches","isPendingLaunch","setPendingLaunch","getLaunches","fetchedLaunches","submitLaunch","e","preventDefault","data","FormData","target","launchDate","Date","get","mission","rocket","response","success","ok","setTimeout","abortLaunch","id"],"sources":["/home/jakedawson/learning/node_learning/NASA/client/src/hooks/useLaunches.js"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\n\nimport { httpGetLaunches, httpSubmitLaunch, httpAbortLaunch } from \"./requests\";\n\nfunction useLaunches(onSuccessSound, onAbortSound, onFailureSound) {\n  const [launches, saveLaunches] = useState([]);\n  const [isPendingLaunch, setPendingLaunch] = useState(false);\n\n  const getLaunches = useCallback(async () => {\n    const fetchedLaunches = await httpGetLaunches();\n    saveLaunches(fetchedLaunches);\n  }, []);\n\n  useEffect(() => {\n    getLaunches();\n  }, [getLaunches]);\n\n  const submitLaunch = useCallback(\n    async (e) => {\n      e.preventDefault();\n      setPendingLaunch(true);\n      const data = new FormData(e.target);\n      const launchDate = new Date(data.get(\"launch-day\"));\n      const mission = data.get(\"mission-name\");\n      const rocket = data.get(\"rocket-name\");\n      const target = data.get(\"planets-selector\");\n      const response = await httpSubmitLaunch({\n        launchDate,\n        mission,\n        rocket,\n        target,\n      });\n      const success = response.ok;\n      if (success) {\n        getLaunches();\n        setTimeout(() => {\n          setPendingLaunch(false);\n          onSuccessSound();\n        }, 800);\n      } else {\n        onFailureSound();\n      }\n    },\n    [getLaunches, onSuccessSound, onFailureSound]\n  );\n\n  const abortLaunch = useCallback(\n    async (id) => {\n      const response = await httpAbortLaunch(id);\n\n      // TODO: Set success based on response.\n      const success = response.ok;\n      if (success) {\n        getLaunches();\n        onAbortSound();\n      } else {\n        onFailureSound();\n      }\n    },\n    [getLaunches, onAbortSound, onFailureSound]\n  );\n\n  return {\n    launches,\n    isPendingLaunch,\n    submitLaunch,\n    abortLaunch,\n  };\n}\n\nexport default useLaunches;\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AAEA,SAASC,eAAT,EAA0BC,gBAA1B,EAA4CC,eAA5C,QAAmE,YAAnE;;AAEA,SAASC,WAAT,CAAqBC,cAArB,EAAqCC,YAArC,EAAmDC,cAAnD,EAAmE;EAAA;;EACjE,MAAM,CAACC,QAAD,EAAWC,YAAX,IAA2BT,QAAQ,CAAC,EAAD,CAAzC;EACA,MAAM,CAACU,eAAD,EAAkBC,gBAAlB,IAAsCX,QAAQ,CAAC,KAAD,CAApD;EAEA,MAAMY,WAAW,GAAGd,WAAW,CAAC,YAAY;IAC1C,MAAMe,eAAe,GAAG,MAAMZ,eAAe,EAA7C;IACAQ,YAAY,CAACI,eAAD,CAAZ;EACD,CAH8B,EAG5B,EAH4B,CAA/B;EAKAd,SAAS,CAAC,MAAM;IACda,WAAW;EACZ,CAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;EAIA,MAAME,YAAY,GAAGhB,WAAW,CAC9B,MAAOiB,CAAP,IAAa;IACXA,CAAC,CAACC,cAAF;IACAL,gBAAgB,CAAC,IAAD,CAAhB;IACA,MAAMM,IAAI,GAAG,IAAIC,QAAJ,CAAaH,CAAC,CAACI,MAAf,CAAb;IACA,MAAMC,UAAU,GAAG,IAAIC,IAAJ,CAASJ,IAAI,CAACK,GAAL,CAAS,YAAT,CAAT,CAAnB;IACA,MAAMC,OAAO,GAAGN,IAAI,CAACK,GAAL,CAAS,cAAT,CAAhB;IACA,MAAME,MAAM,GAAGP,IAAI,CAACK,GAAL,CAAS,aAAT,CAAf;IACA,MAAMH,MAAM,GAAGF,IAAI,CAACK,GAAL,CAAS,kBAAT,CAAf;IACA,MAAMG,QAAQ,GAAG,MAAMvB,gBAAgB,CAAC;MACtCkB,UADsC;MAEtCG,OAFsC;MAGtCC,MAHsC;MAItCL;IAJsC,CAAD,CAAvC;IAMA,MAAMO,OAAO,GAAGD,QAAQ,CAACE,EAAzB;;IACA,IAAID,OAAJ,EAAa;MACXd,WAAW;MACXgB,UAAU,CAAC,MAAM;QACfjB,gBAAgB,CAAC,KAAD,CAAhB;QACAN,cAAc;MACf,CAHS,EAGP,GAHO,CAAV;IAID,CAND,MAMO;MACLE,cAAc;IACf;EACF,CAzB6B,EA0B9B,CAACK,WAAD,EAAcP,cAAd,EAA8BE,cAA9B,CA1B8B,CAAhC;EA6BA,MAAMsB,WAAW,GAAG/B,WAAW,CAC7B,MAAOgC,EAAP,IAAc;IACZ,MAAML,QAAQ,GAAG,MAAMtB,eAAe,CAAC2B,EAAD,CAAtC,CADY,CAGZ;;IACA,MAAMJ,OAAO,GAAGD,QAAQ,CAACE,EAAzB;;IACA,IAAID,OAAJ,EAAa;MACXd,WAAW;MACXN,YAAY;IACb,CAHD,MAGO;MACLC,cAAc;IACf;EACF,CAZ4B,EAa7B,CAACK,WAAD,EAAcN,YAAd,EAA4BC,cAA5B,CAb6B,CAA/B;EAgBA,OAAO;IACLC,QADK;IAELE,eAFK;IAGLI,YAHK;IAILe;EAJK,CAAP;AAMD;;GAhEQzB,W;;AAkET,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}